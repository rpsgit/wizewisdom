<!DOCTYPE html>
<html>
<head>
<title>Makadarem Admin</title>
<style>
body{font-family:Arial;background:#f4f4f4;padding:20px}
.card{
  background:#fff;
  padding:14px;
  border-radius:12px;
  margin-bottom:10px;
}
button{
  padding:10px 14px;
  border:none;
  border-radius:8px;
  background:#111;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>
<body>

<h2>ðŸ“¦ Live Orders</h2>
<button onclick="toggleClosed()">Toggle Closed Today</button>
<p id="state"></p>
<hr>
<div id="orders">Loadingâ€¦</div>

<script>
const BASE="https://script.google.com/macros/s/AKfycbykjopHttTCH5TcgR_fkHjxDTFJbgKjZ5Qfs-wnJJdD5Z638xYjaAzSerNfsgtAuf41/exec";
const ORDERS_URL=BASE+"?func=getOrders";
const SETTINGS_URL=BASE+"?func=getSettings";
const SET_URL=BASE+"?func=setClosed";

function load(){
  fetch(ORDERS_URL).then(r=>r.json()).then(d=>{
    orders.innerHTML=d.reverse().map(o=>`
      <div class="card">
        <b>${o.name}</b><br>
        ${o.items}<br>
        â‚±${o.total}
      </div>`).join("");
  });

  fetch(SETTINGS_URL).then(r=>r.json()).then(s=>{
    state.innerHTML="<b>Closed today:</b> "+s.closed_today;
  });
}

function toggleClosed(){
  fetch(SET_URL,{method:"POST"}).then(load);
}

load();
setInterval(load,5000);
</script>
</body>
</html>
