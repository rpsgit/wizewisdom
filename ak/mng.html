---
layout: default
title: ADIMUP ADMIN
---

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lato:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{ --primary:#ffd600; --bg:#f4f4f4; }
body{ font-family:'Lato', sans-serif; background:var(--bg); padding: 20px; }
h1, h2, th, button { font-family:'Bebas Neue', sans-serif; letter-spacing:.05em; }
.card { background:#fff; padding:20px; border-radius:15px; box-shadow:0 2px 10px rgba(0,0,0,0.05); margin-bottom:20px; }
table { width:100%; border-collapse:collapse; }
th { text-align:left; background:#f8f8f8; padding:12px; border-bottom:2px solid var(--primary); }
td { padding:12px; border-bottom:1px solid #eee; }
.btn { border:none; padding:8px 15px; border-radius:5px; cursor:pointer; background:var(--primary); }
.completed { opacity: 0.5; background: #f0f0f0; }
.status-tag { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; background: #eee; }
</style>

<div style="max-width:1100px; margin:0 auto;">
    <h1>ADIMUP ADMIN DASHBOARD</h1>

    <div class="card">
        <h2>Store & Payment Settings</h2>
        <div style="display:flex; gap:20px; flex-wrap:wrap;">
            <button id="toggleStore" onclick="toggleStoreStatus()">Loading...</button>
            <div>GCash: <input id="gcashNum" style="padding:5px"></div>
            <div>Maya: <input id="mayaNum" style="padding:5px"></div>
            <button class="btn" onclick="saveNumbers()">Update Payment Info</button>
        </div>
    </div>

    <div class="card">
        <h2>Recent Orders</h2>
        <div style="overflow-x:auto">
            <table>
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Time</th>
                        <th>Customer</th>
                        <th>Items</th>
                        <th>Total</th>
                        <th>Payment</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="ordersBody"></tbody>
            </table>
        </div>
    </div>

    <div class="card">
        <h2>Menu Management</h2>
        <table id="menuTable">
            <thead><tr><th>Item</th><th>Category</th><th>Price</th><th>Status</th></tr></thead>
            <tbody id="menuBody"></tbody>
        </table>
    </div>
</div>

<script>
const BASE = "https://script.google.com/macros/s/AKfycbx1d8F2P48XU_2gXXMnOs21zCaMPwrRuyCb5YkGSLUVpGPxwJj5fR8oT5HltlqtXkiDTg/exec";
let storeClosed = false;

async function loadAll(){
    // Load Settings
    const sRes = await fetch(BASE + "?func=getSettings");
    const s = await sRes.json();
    storeClosed = !!(s.closed_today || s.auto_closed);
    document.getElementById('toggleStore').textContent = storeClosed ? "OPEN STORE" : "CLOSE STORE";
    document.getElementById('gcashNum').value = s.gcash_number || '';
    document.getElementById('mayaNum').value = s.maya_number || '';

    // Load Orders
    const oRes = await fetch(BASE + "?func=getOrders");
    const orders = await oRes.json();
    const ob = document.getElementById('ordersBody');
    ob.innerHTML = "";
    orders.sort((a,b)=>b.ID-a.ID).forEach(o => {
        const tr = document.createElement('tr');
        if(o.Completed) tr.className = "completed";
        tr.innerHTML = `
            <td><strong>${o.OrderID}</strong></td>
            <td><small>${o.Time}</small></td>
            <td><b>${o.Name}</b><br><small>${o.Contact}</small></td>
            <td>${o.Items}</td>
            <td>â‚±${o.Total}</td>
            <td><span class="status-tag">${o.Payment}</span></td>
            <td><button class="btn" onclick="markDone(${o.ID})" ${o.Completed?'disabled':''}>${o.Completed?'Done':'Mark Done'}</button></td>
        `;
        ob.appendChild(tr);
    });

    // Load Menu
    const mRes = await fetch(BASE + "?func=getMenu");
    const menu = await mRes.json();
    const mb = document.getElementById('menuBody');
    mb.innerHTML = menu.map(m => `
        <tr>
            <td>${m.Item}</td>
            <td>${m.Category}</td>
            <td>â‚±${m.Price}</td>
            <td><button onclick="toggleSold('${m.Item}', ${!m.SoldOut})">${m.SoldOut ? 'ðŸ”´ Sold Out' : 'ðŸŸ¢ Available'}</button></td>
        </tr>
    `).join('');
}

async function saveNumbers(){
    const fd = new URLSearchParams({ 
        func: "updatePaymentInfo", 
        gcash_number: document.getElementById('gcashNum').value, 
        maya_number: document.getElementById('mayaNum').value 
    });
    await fetch(BASE, { method: "POST", mode: "no-cors", body: fd.toString() });
    alert("Updated!");
}

async function toggleStoreStatus(){
    const fd = new URLSearchParams({ func: "toggleClose", status: !storeClosed });
    await fetch(BASE, { method: "POST", mode: "no-cors", body: fd.toString() });
    loadAll();
}

async function toggleSold(item, status){
    const fd = new URLSearchParams({ func: "toggleSold", item: item, status: status });
    await fetch(BASE, { method: "POST", mode: "no-cors", body: fd.toString() });
    loadAll();
}

async function markDone(id){
    const fd = new URLSearchParams({ func: "markCompleted", id: id });
    await fetch(BASE, { method: "POST", mode: "no-cors", body: fd.toString() });
    loadAll();
}

loadAll();
setInterval(loadAll, 30000);
</script>
