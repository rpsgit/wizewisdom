---
layout: default
title: ADIMUP ADMIN
---

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lato:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{ --primary:#ffd600; --bg:#f4f4f4; --text-dark: #111; }
body{ font-family:'Lato', sans-serif; background:var(--bg); padding: 20px; }
h1, h2, th, button { font-family:'Bebas Neue', sans-serif; letter-spacing:.05em; }

.card { background:#fff; padding:20px; border-radius:20px; box-shadow:0 4px 15px rgba(0,0,0,0.05); margin-bottom:20px; }
table { width:100%; border-collapse:collapse; }
th { text-align:left; background:#f8f8f8; padding:12px; border-bottom:2px solid var(--primary); }
td { padding:12px; border-bottom:1px solid #eee; font-size:0.9rem; }
.btn { border:none; padding:8px 15px; border-radius:8px; cursor:pointer; font-size:1rem; }
.btn-done { background:#e8f5e9; color:#2e7d32; }
.btn-update { background:var(--primary); color:#111; }
.config-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:15px; }
input { padding:8px; border:1px solid #ccc; border-radius:5px; width:100%; }
</style>

<div style="max-width:1100px; margin:0 auto;">
    <h1>ADIMUP KITCHEN ADMIN</h1>

    <div class="card">
        <h2>Payment Settings</h2>
        <div class="config-grid">
            <div>
                <label>GCash Number</label>
                <input type="text" id="gcashNum">
            </div>
            <div>
                <label>Maya Number</label>
                <input type="text" id="mayaNum">
            </div>
            <div style="display:flex; align-items:flex-end;">
                <button class="btn btn-update" onclick="updateNumbers()">Update Numbers</button>
            </div>
        </div>
    </div>

    <div class="card">
        <h2>Recent Orders</h2>
        <div style="overflow-x:auto">
            <table>
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Time</th>
                        <th>Customer</th>
                        <th>Items</th>
                        <th>Total</th>
                        <th>Payment</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="orderTable"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const BASE = "https://script.google.com/macros/s/AKfycbwfF7uSXRVnFvhaZRe69tZvg66ZAh4VuU9FQSq5iMXkh4PukdknpEEQRtAMxRzSPsFDew/exec;

async function loadData(){
    // Load Settings
    const sRes = await fetch(BASE + "?func=getSettings");
    const s = await sRes.json();
    document.getElementById('gcashNum').value = s.gcash_number || '';
    document.getElementById('mayaNum').value = s.maya_number || '';

    // Load Orders
    const oRes = await fetch(BASE + "?func=getOrders");
    const orders = await oRes.json();
    const tbody = document.getElementById('orderTable');
    tbody.innerHTML = "";

    orders.sort((a,b) => b.ID - a.ID).forEach(o => {
        const tr = document.createElement('tr');
        if(o.Completed) tr.style.opacity = "0.5";
        
        tr.innerHTML = `
            <td><strong>${o.OrderID || 'N/A'}</strong></td>
            <td>${o.Time}</td>
            <td><b>${o.Name}</b><br><small>${o.Contact}</small></td>
            <td>${o.Items}</td>
            <td>₱${o.Total}</td>
            <td><span style="padding:4px 8px; border-radius:5px; background:#f0f0f0; font-size:0.7rem;">${o.Payment}</span></td>
            <td>
                <button class="btn btn-done" onclick="markDone(${o.ID}, this)" ${o.Completed?'disabled':''}>
                    ${o.Completed ? '✓' : 'MARK DONE'}
                </button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

async function updateNumbers(){
    const g = document.getElementById('gcashNum').value;
    const m = document.getElementById('mayaNum').value;
    const fd = new URLSearchParams();
    fd.append("func", "updatePaymentInfo");
    fd.append("gcash_number", g);
    fd.append("maya_number", m);

    await fetch(BASE, { method: "POST", mode: "no-cors", body: fd.toString() });
    alert("Settings updated!");
}

async function markDone(id, btn){
    btn.textContent = "...";
    const fd = new URLSearchParams();
    fd.append("func", "markCompleted");
    fd.append("id", id);
    await fetch(BASE, { method: "POST", mode: "no-cors", body: fd.toString() });
    loadData();
}

loadData();
setInterval(loadData, 60000); // Auto refresh every minute
</script>
