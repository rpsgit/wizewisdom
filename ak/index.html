---
layout: default
title: ADIMUP KITCHEN
---

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">

<style>
:root{ --primary:#ffd600; --secondary:#ffea00; --bg:#f4f4f4; --text-dark: #111; }
*{box-sizing:border-box}
body{ margin:0; font-family:'Lato', Arial, sans-serif; background:var(--bg); color: var(--text-dark); }
h1,h2,h3, .tabs button, .price, #logoFallback{ font-family:'Bebas Neue', Arial, sans-serif; letter-spacing:.03em; }

#closedBanner{ display:none; background:#111; color:#fff; padding:14px; text-align:center; font-weight:900; position: sticky; top: 0; z-index: 1001; }
.page{ position: relative; max-width:1200px; margin:20px auto 200px; padding:16px; background:#fff; border-radius:24px; }

/* TABS */
.tabs{ display:flex; gap:8px; overflow-x:auto; margin-bottom:16px; padding-bottom: 5px; scrollbar-width: none; }
.tabs::-webkit-scrollbar { display: none; }
.tabs button{ border:none; padding:10px 16px; border-radius:999px; background:#eee; cursor:pointer; white-space: nowrap; transition: 0.2s; }
.tabs button.active{ background:linear-gradient(135deg,var(--secondary),var(--primary)); color:var(--text-dark); }

/* MENU GRID */
.tab-content{ display:none; }
.tab-content.active{ display:block; animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px; }
.item{ background:#fff; border-radius:16px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.1); border: 1px solid #eee; }
.item img{ width:100%; height:140px; object-fit:cover; cursor: zoom-in; }
.body{ padding:12px; display:flex; justify-content:space-between; align-items: center; }
.price{ color:#d4af37; font-weight:700; font-size: 1.1rem; }
.actions{ display:flex; flex-direction:column; align-items:center; }
.item-qty{ width:50px; text-align:center; border-radius:4px; border:1px solid #ccc; margin-top:5px; padding:2px; }

/* COPY BUTTON */
.copy-btn { background: #eee; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; cursor: pointer; margin-left: 8px; vertical-align: middle; }
.copy-btn:active { background: var(--primary); }

.pay-box { background: #f9f9f9; padding: 15px; border-radius: 12px; margin: 15px 0; border: 1px solid #ddd; }
#cart{ position:fixed; bottom:20px; right:20px; background:linear-gradient(135deg,var(--secondary),var(--primary)); color:var(--text-dark); padding:15px 25px; border-radius:999px; font-family:'Bebas Neue'; cursor:pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 100; }
#modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); justify-content:center; align-items:center; z-index:999; }
.modal-box{ background:#fff; padding:24px; border-radius:16px; max-width:420px; width:92%; text-align: center;}
.order-id-display { font-size: 1.2rem; color: #d4af37; border: 2px dashed #d4af37; padding: 10px; margin: 10px 0; display: inline-block; font-family: 'Bebas Neue'; width: 100%; }
button.main{ width:100%; padding:14px; border:none; border-radius:999px; background:linear-gradient(135deg,var(--secondary),var(--primary)); color:var(--text-dark); font-family:'Bebas Neue'; font-size: 1.2rem; cursor: pointer; }
</style>

<div id="closedBanner">ðŸš« ORDERING IS TEMPORARILY CLOSED</div>

<div class="page">
  <h1 style="text-align:center; margin-top:0;">ADIMUP KITCHEN</h1>
  <div class="tabs" id="tabs"></div>

  <form id="form">
    <div id="menu"></div>
    <div id="cart" onclick="showSummary()">ðŸ›’ <span id="cartCount">0</span> | â‚±<span id="cartSum">0</span></div>

    <h3 style="border-bottom: 2px solid var(--primary); display:inline-block">DELIVERY DETAILS</h3>
    <input name="name" id="userName" placeholder="Full Name" required>
    <input name="contact" id="userContact" placeholder="Phone Number" required>
    <input name="address" id="userAddress" placeholder="Complete Address" required>
    <textarea name="notes" placeholder="Landmarks / Special Instructions"></textarea>

    <h3 style="border-bottom: 2px solid var(--primary); display:inline-block">PAYMENT METHOD</h3>
    <div class="pay-box">
        <label style="display:block; margin-bottom:10px;"><input type="radio" name="payment" value="Cash" checked onclick="togglePay()"> ðŸ’µ Cash on Delivery</label>
        <label style="display:block; margin-bottom:10px;"><input type="radio" name="payment" value="GCash" onclick="togglePay()"> ðŸŸ¦ GCash</label>
        <label style="display:block; margin-bottom:10px;"><input type="radio" name="payment" value="Maya" onclick="togglePay()"> ðŸŸ© Maya</label>
        <div id="payInstructions" style="display:none; background:#fff; padding:10px; border-radius:8px; border:1px dashed #ccc; margin-top:10px;">
            Send to <span id="payLabel">GCash</span>: <br>
            <span id="payNum" style="font-weight:900; font-size:1.2rem"></span> 
            <button type="button" class="copy-btn" onclick="copyNum()">COPY</button>
        </div>
    </div>
    <button type="submit" class="main">PREVIEW ORDER</button>
  </form>
</div>

<div id="modal">
  <div class="modal-box" id="modalContent">
    <h3>ORDER SUMMARY</h3>
    <div id="preview" style="text-align:left; margin-bottom:20px;"></div>
    <button class="main" onclick="confirmOrder()" id="finalBtn">CONFIRM & SEND</button>
    <button type="button" onclick="document.getElementById('modal').style.display='none'" style="background:none; border:none; margin-top:15px; color:gray; cursor:pointer">Cancel</button>
  </div>
</div>

<script>
const BASE = "https://script.google.com/macros/s/AKfycbxr2GcpiySfR5xWre3t1mgm0g7mHjTQemGN_-_tu-D2rK_XOTtM7GNPSIeF2YOkAqiJDA/exec";
const prices = {};
let settings = {};
let pendingData = null;

// Initialize
fetch(BASE + "?func=getSettings").then(r=>r.json()).then(s=>{
  settings = s;
  if(s.closed_today || s.auto_closed) document.getElementById('closedBanner').style.display="block";
});

function loadMenu() {
  fetch(BASE + "?func=getMenu").then(r=>r.json()).then(data=>{
    const tabs = document.getElementById('tabs'), menu = document.getElementById('menu'), cats={};
    data.forEach(i => { cats[i.Category] = cats[i.Category] || []; cats[i.Category].push(i); });
    
    Object.keys(cats).forEach((cat, idx) => {
      const id = "cat-" + idx;
      tabs.insertAdjacentHTML("beforeend", `<button type="button" class="${idx==0?'active':''}" onclick="openTab('${id}', this)">${cat}</button>`);
      menu.insertAdjacentHTML("beforeend", `
        <div class="tab-content ${idx==0?'active':''}" id="${id}">
          <div class="grid">${cats[cat].map(i => {
            const key = i.Item.replace(/\s+/g, '_');
            prices[key] = i.Price;
            return `
              <div class="item">
                <img src="${i.ImageURL || 'https://via.placeholder.com/300x200'}">
                <div class="body">
                  <div><strong>${i.Item}</strong><div class="price">â‚±${i.Price}</div></div>
                  <div class="actions">
                    ${i.SoldOut ? '<span class="soldout">SOLD OUT</span>' : `
                      <input type="checkbox" class="item-check" data-key="${key}" onchange="updateCart()">
                      <input type="number" class="item-qty" id="q_${key}" value="1" min="1" style="display:none" onchange="updateCart()">
                    `}
                  </div>
                </div>
              </div>`;
          }).join('')}</div>
        </div>`);
    });
  });
}

function openTab(id, btn) {
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
}

function updateCart() {
  let total = 0, count = 0;
  document.querySelectorAll('.item-check').forEach(cb => {
    const key = cb.getAttribute('data-key');
    const qtyInput = document.getElementById('q_'+key);
    if(cb.checked) {
      qtyInput.style.display = "block";
      total += prices[key] * qtyInput.value;
      count += parseInt(qtyInput.value);
    } else {
      qtyInput.style.display = "none";
    }
  });
  document.getElementById('cartSum').textContent = total;
  document.getElementById('cartCount').textContent = count;
}

document.getElementById('form').onsubmit = (e) => {
  e.preventDefault();
  const s = getSummary();
  if(!s.count) return alert("Please select items first!");
  document.getElementById('preview').innerHTML = s.html;
  document.getElementById('modal').style.display = 'flex';
  pendingData = s;
};

function getSummary() {
  let html = "", total = 0, count = 0, items = [];
  document.querySelectorAll('.item-check:checked').forEach(cb => {
    const key = cb.getAttribute('data-key');
    const qty = document.getElementById('q_'+key).value;
    const sub = prices[key] * qty;
    html += `<div style="display:flex; justify:space-between"><span>${key.replace(/_/g,' ')} x${qty}</span> <span>â‚±${sub}</span></div>`;
    total += sub; count++;
    items.push(`${key.replace(/_/g,' ')} (x${qty})`);
  });
  const method = document.querySelector('input[name="payment"]:checked').value;
  html += `<hr><div style="text-align:right"><b>TOTAL: â‚±${total}</b><br><small>Method: ${method}</small></div>`;
  return { html, total, items: items.join(', '), payment: method };
}

async function confirmOrder() {
  const btn = document.getElementById('finalBtn');
  btn.disabled = true; btn.textContent = "SENDING...";
  
  const fd = new URLSearchParams({
    func: "order",
    name: document.getElementById('userName').value,
    contact: document.getElementById('userContact').value,
    address: document.getElementById('userAddress').value,
    notes: document.querySelector('textarea[name="notes"]').value,
    items: pendingData.items,
    total: pendingData.total,
    payment: pendingData.payment
  });

  try {
    const resp = await fetch(BASE, { method: "POST", body: fd, mode: "no-cors" });
    // Since no-cors can't read response, we wait 1.5s then fetch the last Order ID or generate a local estimate
    // To be 100% accurate, we would usually use a normal fetch, but Google Apps Script POST requires no-cors for simple setups.
    // IMPROVED: Generate the ID pattern here to match Backend Logic exactly.
    const now = new Date();
    const dateStr = now.getFullYear()+("0"+(now.getMonth()+1)).slice(-2)+("0"+now.getDate()).slice(-2);
    const timeStr = ("0"+now.getHours()).slice(-2)+("0"+now.getMinutes()).slice(-2);
    const refID = `AK-${dateStr}-${timeStr}-XXX`; // The Backend creates the random part.

    document.getElementById('modalContent').innerHTML = `
      <h2 style="color:green">ORDER RECEIVED!</h2>
      <p>Please save your Order ID for reference:</p>
      <div class="order-id-display">PROCESSING...</div>
      <p>We will contact you shortly via phone.</p>
      <button class="main" onclick="location.reload()">CLOSE</button>
    `;
    
    // Attempt to get the real ID from the backend (requires a short delay for sheet to update)
    setTimeout(async () => {
        const r = await fetch(BASE + "?func=getOrders");
        const orders = await r.json();
        const myOrder = orders[orders.length - 1];
        document.querySelector('.order-id-display').textContent = myOrder.OrderID;
    }, 2000);

  } catch(e) { alert("Error sending order."); btn.disabled = false; }
}

function togglePay() {
  const val = document.querySelector('input[name="payment"]:checked').value;
  const box = document.getElementById('payInstructions');
  box.style.display = (val === "Cash") ? "none" : "block";
  document.getElementById('payLabel').textContent = val;
  document.getElementById('payNum').textContent = (val === "GCash") ? settings.gcash_number : settings.maya_number;
}

function copyNum() {
  const num = document.getElementById('payNum').textContent;
  navigator.clipboard.writeText(num);
  alert("Number copied: " + num);
}

loadMenu();
</script>
